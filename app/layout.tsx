// import install from '@twind/with-next/app';
// import config from "../twind.config";
// import { useEffect, useState } from "react";
"use client";
import { useLocalStorage } from "usehooks-ts";
import DarkModeSwitch from "@/components/layout/DarkModeSwitch";
import { Providers } from "./providers";
import "./globals.css";
import Image from "next/image";

// import { setup } from "@twind/core";
import { motion } from "framer-motion";
import EthUsdSwitch from "@/components/layout/EthUsdSwitch";
import Sidebar from "@/components/layout/Sidebar";
import { Bars3Icon } from "@heroicons/react/24/solid";
import { useEffect, useState } from "react";
import Loader from "@/components/Loader";

// activate twind - must be called at least once
// const twind = install(config);

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="en" suppressHydrationWarning>
      {/*
        <head /> will contain the components returned by the nearest parent
        head.tsx. Find out more at https://beta.nextjs.org/docs/api-reference/file-conventions/head
      */}
      <head />
      <body className="bg-white text-black dark:bg-forest-850 dark:text-white">
        {/* large centered loading animation */}
        {/* <div
            id="main-loader"
            className="fixed inset-0 flex items-center justify-center"
          >
            <div className="animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-gray-900 dark:border-white"></div>
          </div> */}

        {/* <div className="min-h-screen max-full mx-auto p-4 sm:p-6 lg:p-8"> */}
        <Providers>
          <div className="flex justify-between h-fit w-full">
            <div className="pt-16 pl-8 bg-slate-100 dark:bg-forest-900 border-slate-400  mix-h-screen max-h-full">
              <Sidebar
                trigger={
                  <button className="flex items-center space-x-2">
                    <Bars3Icon className="h-6 w-6" />
                  </button>
                }
              />
            </div>
            <div id="main" className="min-h-screen flex flex-col flex-1 p-8">
              <div className="flex justify-between items-center">
                <div className="font-bold text-2xl">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    // width="336"
                    height="85"
                    viewBox="0 0 336 107"
                    className="fill-pie-400 from- -mt-4 ml-4"
                  >
                    <path d="M121.245 57.766c0-1.383.189-2.702.574-3.954.378-1.253.933-2.35 1.664-3.293a8.172 8.172 0 0 1 2.681-2.255c1.063-.56 2.284-.841 3.673-.841 1.214 0 2.297.209 3.236.626a7.183 7.183 0 0 1 2.453 1.772v-1.754h5.409V67.61a7.9 7.9 0 0 1-.626 3.096 7.363 7.363 0 0 1-1.866 2.613c-.822.751-1.833 1.348-3.04 1.79-1.207.44-2.584.661-4.137.661-1.096 0-2.12-.143-3.079-.43a10.007 10.007 0 0 1-2.591-1.18 8.164 8.164 0 0 1-1.99-1.79 7.389 7.389 0 0 1-1.22-2.219h5.872a5.304 5.304 0 0 0 1.22 1.396c.477.382 1.214.573 2.219.573.763 0 1.389-.144 1.879-.43a3.418 3.418 0 0 0 1.161-1.074c.287-.43.489-.912.613-1.45a7.243 7.243 0 0 0 .176-1.556v-1.861a7.393 7.393 0 0 1-2.453 1.79c-.939.429-2.022.644-3.236.644-1.389 0-2.61-.28-3.673-.841a8.082 8.082 0 0 1-2.681-2.273c-.731-.955-1.286-2.064-1.664-3.329a13.563 13.563 0 0 1-.574-3.973Zm9.878 5.763c.789 0 1.454-.18 1.989-.537a4.24 4.24 0 0 0 1.305-1.378 6.09 6.09 0 0 0 .718-1.861c.144-.68.215-1.342.215-1.987a8.92 8.92 0 0 0-.215-1.914 6.206 6.206 0 0 0-.698-1.808 4.106 4.106 0 0 0-1.305-1.36c-.555-.358-1.22-.537-2.009-.537-.783 0-1.449.18-1.984.537a4.332 4.332 0 0 0-1.311 1.36 5.859 5.859 0 0 0-.711 1.808 8.922 8.922 0 0 0-.216 1.914c0 .645.079 1.307.229 1.987.156.68.404 1.3.737 1.861.333.56.77 1.02 1.305 1.378.541.358 1.187.537 1.951.537ZM144.158 67.609V48.067h5.402v3.293c.62-1.17 1.436-2.118 2.454-2.846 1.017-.727 2.27-1.091 3.777-1.091h.463c.17 0 .333.012.503.036.169 0 .333.012.502.035v5.512c-.313-.024-.6-.06-.861-.107a17.19 17.19 0 0 0-1.429-.072c-1.174 0-2.114.12-2.832.358-.717.239-1.265.549-1.644.93-.385.383-.632.794-.75 1.235a4.81 4.81 0 0 0-.183 1.307v10.952h-5.402ZM168.501 47.494c1.644 0 3.112.28 4.404.841 1.285.56 2.368 1.313 3.236 2.255a9.633 9.633 0 0 1 1.99 3.293 11.61 11.61 0 0 1 .678 3.955c0 1.384-.228 2.708-.678 3.972a9.792 9.792 0 0 1-1.99 3.33c-.868.954-1.951 1.711-3.236 2.272-1.292.56-2.76.84-4.404.84-1.671 0-3.132-.285-4.385-.858-1.253-.573-2.303-1.336-3.151-2.29a9.61 9.61 0 0 1-1.918-3.33 12.12 12.12 0 0 1-.646-3.936c0-1.36.215-2.667.646-3.92a9.641 9.641 0 0 1 1.918-3.31c.848-.954 1.898-1.712 3.151-2.273 1.253-.56 2.714-.84 4.385-.84Zm.071 16.106c.835 0 1.547-.179 2.127-.537a4.331 4.331 0 0 0 1.416-1.378c.359-.56.62-1.18.79-1.86.163-.68.247-1.343.247-1.987 0-.62-.078-1.259-.228-1.915a5.699 5.699 0 0 0-.776-1.808 4.381 4.381 0 0 0-1.41-1.36c-.587-.358-1.311-.537-2.166-.537-.861 0-1.585.18-2.166.537a4.402 4.402 0 0 0-1.416 1.36 5.685 5.685 0 0 0-.769 1.808 8.215 8.215 0 0 0-.235 1.915c0 .644.085 1.306.254 1.986.17.68.431 1.3.79 1.861a4.3 4.3 0 0 0 1.409 1.378c.587.358 1.298.537 2.133.537ZM179.135 48.067h5.474l3.654 11.776 3.223-11.776h5.617l3.223 11.776 3.654-11.776h5.546l-6.087 19.542h-5.872l-3.289-11.954-3.262 11.954h-5.833l-6.048-19.542ZM268.349 75.196v-27.13h5.403v2.112a8.335 8.335 0 0 1 2.701-1.968c1.044-.477 2.224-.716 3.562-.716 1.435 0 2.701.287 3.797.86a8.157 8.157 0 0 1 2.74 2.29c.725.954 1.273 2.064 1.645 3.328.371 1.265.554 2.577.554 3.937 0 1.36-.183 2.667-.554 3.92-.372 1.252-.92 2.356-1.645 3.31a7.971 7.971 0 0 1-2.74 2.273c-1.096.56-2.362.84-3.797.84-1.338 0-2.518-.232-3.562-.697a8.116 8.116 0 0 1-2.701-1.95v9.591h-5.403Zm10.237-11.667c.861 0 1.579-.18 2.166-.537a4.402 4.402 0 0 0 1.416-1.36 5.673 5.673 0 0 0 .763-1.808 8.215 8.215 0 0 0 .235-1.915c0-.644-.085-1.306-.248-1.986a6.19 6.19 0 0 0-.789-1.861 4.332 4.332 0 0 0-1.416-1.378c-.581-.358-1.292-.537-2.127-.537-.835 0-1.546.179-2.133.537a4.313 4.313 0 0 0-1.41 1.378 6.066 6.066 0 0 0-.789 1.86 8.16 8.16 0 0 0-.248 1.987c0 .62.072 1.259.228 1.915.157.656.411 1.259.77 1.808a4.402 4.402 0 0 0 1.416 1.36c.587.358 1.305.537 2.166.537ZM291.296 48.067h5.402V67.61h-5.402V48.067Zm0-2.935V40.48h5.402v4.652h-5.402ZM318.822 61.775c-.639 1.98-1.801 3.543-3.471 4.688-1.67 1.146-3.673 1.718-6.015 1.718-1.671 0-3.139-.28-4.404-.84-1.259-.561-2.323-1.32-3.184-2.273a9.467 9.467 0 0 1-1.931-3.311 11.96 11.96 0 0 1-.646-3.92c0-1.36.215-2.66.646-3.9a9.658 9.658 0 0 1 1.911-3.293c.848-.955 1.899-1.718 3.151-2.29 1.253-.573 2.715-.86 4.385-.86 1.507 0 2.871.263 4.104.788 1.226.525 2.27 1.234 3.131 2.13a9.516 9.516 0 0 1 1.984 3.095c.47 1.17.698 2.398.698 3.687 0 .334-.013.662-.052.984-.033.322-.079.65-.124.984h-14.217c.124.573.32 1.121.594 1.646.274.525.626.99 1.057 1.396a4.9 4.9 0 0 0 1.5.967c.575.238 1.234.358 1.971.358.737 0 1.448-.138 2.133-.412a3.07 3.07 0 0 0 1.553-1.342h5.226Zm-5.33-6.8a4.484 4.484 0 0 0-1.344-2.005c-.633-.549-1.488-.823-2.558-.823-1.096 0-2.003.274-2.721.823a5.223 5.223 0 0 0-1.611 2.004h8.234Z" />
                    <path
                      fill-rule="evenodd"
                      d="M266.259 62.004c-.698 2.143-1.951 3.833-3.758 5.073-1.788 1.226-3.935 1.849-6.44 1.849-1.781 0-3.353-.306-4.704-.906-1.364-.605-2.512-1.425-3.438-2.455a10.227 10.227 0 0 1-2.082-3.568 12.743 12.743 0 0 1-.685-4.16c0-1.446.229-2.827.685-4.146a10.422 10.422 0 0 1 2.062-3.544c.913-1.03 2.042-1.856 3.399-2.474 1.338-.613 2.904-.926 4.691-.926 1.612 0 3.08.285 4.398.847 1.324.566 2.446 1.334 3.373 2.3a10.253 10.253 0 0 1 2.146 3.336 10.7 10.7 0 0 1 .751 3.962c0 .362-.02.717-.059 1.067-.039.33-.078.665-.131 1.007a.743.743 0 0 1-.737.64h-13.212c.072.188.157.373.248.555.242.452.542.851.914 1.2.358.344.789.617 1.272.82.489.203 1.05.3 1.683.3.646 0 1.259-.118 1.853-.357.522-.21.914-.55 1.188-1.023a.748.748 0 0 1 .645-.373h5.233a.743.743 0 0 1 .705.977Zm-1.795.515h-3.738a3.83 3.83 0 0 1-1.677 1.288c-.77.31-1.579.466-2.414.466-.848 0-1.598-.142-2.257-.416a5.59 5.59 0 0 1-1.723-1.112 5.916 5.916 0 0 1-1.207-1.593 7 7 0 0 1-.659-1.84.743.743 0 0 1 .731-.897h13.558l.039-.321c.033-.295.046-.596.046-.902a9.15 9.15 0 0 0-.646-3.41 8.73 8.73 0 0 0-1.834-2.856c-.789-.824-1.755-1.477-2.883-1.96-1.142-.488-2.414-.728-3.811-.728-1.546 0-2.91.26-4.071.792-1.155.527-2.127 1.228-2.903 2.107a8.947 8.947 0 0 0-1.768 3.042 11.042 11.042 0 0 0-.607 3.657c0 1.276.202 2.502.607 3.677a8.818 8.818 0 0 0 1.781 3.054c.789.879 1.768 1.574 2.936 2.09 1.174.522 2.544.777 4.097.777 2.179 0 4.045-.522 5.598-1.587a8.03 8.03 0 0 0 2.805-3.328Zm-4.247-6.8h-8.234a.744.744 0 0 1-.678-1.055 5.924 5.924 0 0 1 1.833-2.287c.842-.641 1.892-.977 3.178-.977 1.278 0 2.29.35 3.046 1.005a5.16 5.16 0 0 1 1.56 2.332.747.747 0 0 1-.098.672.753.753 0 0 1-.607.31Zm-1.2-1.492a3.921 3.921 0 0 0-.633-.695c-.509-.442-1.201-.64-2.068-.64-.914 0-1.671.212-2.271.668a5.04 5.04 0 0 0-.711.667h5.683ZM224.92 39.732h5.402c.411 0 .744.334.744.746v7.792c.45-.323.94-.605 1.468-.847 1.083-.493 2.362-.747 3.843-.747 1.435 0 2.655.244 3.66.714 1.031.48 1.866 1.13 2.519 1.944a7.525 7.525 0 0 1 1.409 2.773c.28 1.007.424 2.046.424 3.117v12.384a.746.746 0 0 1-.75.745h-5.403a.744.744 0 0 1-.743-.745V56.656c0-.517-.059-1.018-.163-1.503a3.477 3.477 0 0 0-.49-1.184 2.434 2.434 0 0 0-.848-.78c-.372-.208-.842-.297-1.409-.297-.653 0-1.207.108-1.657.344-.451.233-.809.521-1.083.871-.274.35-.47.745-.581 1.184-.131.47-.196.925-.196 1.365v10.952a.745.745 0 0 1-.744.745h-5.402a.746.746 0 0 1-.75-.745v-27.13c0-.412.333-.746.75-.746Zm.744 1.492v25.638h3.915V56.656c0-.563.078-1.146.241-1.75.17-.635.45-1.206.848-1.715.392-.509.914-.937 1.566-1.277.646-.336 1.422-.514 2.349-.514.868 0 1.579.173 2.14.49a3.88 3.88 0 0 1 1.363 1.26c.327.49.562 1.05.699 1.68a8.45 8.45 0 0 1 .195 1.826v10.206h3.915V55.224c0-.934-.124-1.84-.366-2.717a6.175 6.175 0 0 0-1.135-2.239c-.515-.64-1.181-1.148-1.99-1.527-.828-.389-1.84-.574-3.027-.574-1.246 0-2.316.2-3.216.612a6.883 6.883 0 0 0-2.284 1.649.745.745 0 0 1-1.298-.5v-8.704h-3.915ZM209.953 47.32h2.551v-5.232c0-.412.333-.745.744-.745h5.402c.418 0 .751.333.751.745v5.232h3.007c.418 0 .751.334.751.745v4.152a.746.746 0 0 1-.751.746h-3.007v7.987c0 .556.078 1.043.261 1.46.11.255.391.3.782.3h2.043c.411 0 .743.334.743.746v4.151a.744.744 0 0 1-.743.746h-3.837c-1.122 0-2.061-.138-2.818-.398-.822-.284-1.475-.7-1.971-1.238a4.712 4.712 0 0 1-1.063-1.93c-.196-.693-.294-1.482-.294-2.37v-9.454h-2.551a.745.745 0 0 1-.744-.746v-4.151c0-.413.333-.746.744-.746Zm.744 1.491v2.66h2.551c.411 0 .744.334.744.746v10.2c0 .736.078 1.39.241 1.963.144.514.385.957.724 1.326.34.37.796.644 1.364.838.626.217 1.403.318 2.329.318h3.086v-2.66h-1.292c-1.141 0-1.833-.455-2.153-1.204-.254-.586-.384-1.267-.384-2.048v-8.733c0-.412.332-.745.743-.745h3.015v-2.66h-3.015a.744.744 0 0 1-.743-.746v-5.232h-3.915v5.231a.745.745 0 0 1-.744.746h-2.551ZM56.865 85.827h-.023c-15.867 0-26.488-5.614-30.023-7.8a5.427 5.427 0 0 1-1.925-2.177c-1.443-2.948-4.788-9.827-4.788-9.827a4.52 4.52 0 0 0-2.435-2.24c-1.402-.545-2.387-1.361-2.767-2.286-.38-.928-.127-1.901.712-2.73l1.827-1.804c.25-.242.377-.518.377-.797 0-.28-.127-.556-.377-.798l-1.827-1.809c-.839-.827-1.092-1.8-.712-2.725.38-.928 1.365-1.74 2.767-2.285l3.054-1.186c.41-.16.742-.376.962-.626.217-.254.314-.533.28-.813l.06-2.002c-.112-.947.522-1.864 1.584-2.606 1.063-.746 2.588-1.241 4.274-1.39l3.27-.418c.497-.045.966-.16 1.358-.336.392-.171 4.934-2.043 6.47-2.457 1.537-.41 3.297-.488 4.934-.22l.5.086 2.55 3.288a10.153 10.153 0 0 1-1.969-.134l-2.744-.227c-.903-.15-1.876-.116-2.723.112-.22.06-.537.197-.678.264l-1.917 1.779c-.653.895-1.115 1.167-2.472 1.767a9.635 9.635 0 0 1-3.01.764l-3.505.843c-.284.026-.56.06-.813.112l.018.171c.194 1.648-.235 3.344-1.517 4.828-.698.805-1.708 1.57-3.025 2.084l-.75.291a6.14 6.14 0 0 1 1.179 3.642 6.14 6.14 0 0 1-1.178 3.643l.75.29c1.316.512 2.326 1.276 3.024 2.081 1.282 1.488 1.711 3.184 1.517 4.832l-.018.171c.253.053.53.086.813.112l3.673.328c1.104.101 2.137.377 3.01.765 1.357.6 2.345 1.472 2.994 2.367l1.227 1.693a5 5 0 0 0 .678.26c.847.232 1.82.262 2.723.113l3.569-.59a10.326 10.326 0 0 1 2.994-.055c1.126.141 2.16.47 3.017.902l2.752 1.398c.616.31 1.425.429 2.256.429h.023c.828 0 1.64-.12 2.256-.43l2.752-1.397a9.294 9.294 0 0 1 3.013-.902 10.351 10.351 0 0 1 2.999.056l3.565.589c.902.149 1.875.119 2.726-.112.216-.056.533-.198.675-.261l1.226-1.693c.653-.895 1.641-1.767 2.995-2.367a9.64 9.64 0 0 1 3.01-.765l3.673-.328c.283-.026.56-.06.816-.112l-.022-.171c-.19-1.648.235-3.344 1.522-4.832.693-.805 1.704-1.57 3.02-2.08l.754-.291a6.119 6.119 0 0 1-1.183-3.642c0-1.234.35-2.498 1.182-3.643l-.753-.29c-1.316-.515-2.327-1.28-3.02-2.085-1.287-1.484-1.712-3.18-1.522-4.828l.022-.171a7.704 7.704 0 0 0-.816-.112l-3.506-.843a9.688 9.688 0 0 1-3.01-.764c-1.353-.6-1.819-.873-2.468-1.767l-1.92-1.779a5.103 5.103 0 0 0-.675-.264c-.85-.228-1.824-.261-2.726-.112l-2.741.227c-.642.108-1.306.153-1.97.135l2.548-3.289.503-.086c1.633-.268 3.394-.19 4.93.22 1.54.414 6.079 2.286 6.47 2.457.396.176.862.291 1.358.336l3.27.417c1.686.15 3.21.645 4.274 1.391 1.066.742 1.697 1.66 1.585 2.606l.06 2.002c-.034.28.063.56.283.813.216.25.548.466.962.626l3.054 1.186c1.398.544 2.387 1.357 2.767 2.285.377.925.123 1.898-.716 2.725l-1.827 1.809c-.246.242-.377.518-.377.797 0 .28.13.556.377.798l1.827 1.805c.84.828 1.093 1.8.716 2.729-.38.925-1.368 1.741-2.767 2.285a4.506 4.506 0 0 0-2.435 2.241l-4.777 9.824a5.48 5.48 0 0 1-1.94 2.192c-3.546 2.181-14.163 7.788-30.02 7.788Zm7.257-43.143c12.12 1.499 21.006 6.364 21.006 12.128 0 6.953-12.955 12.602-28.909 12.602-15.957 0-28.908-5.649-28.908-12.602 0-5.943 9.453-10.931 22.155-12.258l5.258 7.281a2.61 2.61 0 0 0 2.118 1.085c.836 0 1.626-.403 2.115-1.085l5.165-7.15Zm-12.02-8.832.321 3.881-5.28-7.296c-1.018-1.521-1.175-4.228-.239-5.805l5.351-8.84.519 2.86-4.032 6.763c-.589.992-.465 2.841.176 3.8l3.185 4.637Zm9.708 3.221-.235-3.22 3.225-4.635c.642-.958.605-2.942.015-3.933l-2.834-4.765-.552-4.727 5.076 8.43c.936 1.576 1.387 4.26.365 5.785l-5.06 7.065Zm-6.109 7.48-1.756-11.7a8.415 8.415 0 0 1 1.077-5.5l2.424-4.104c.392-.66.526-1.439.385-2.192l-2.014-10.681a2.055 2.055 0 0 1 2.79.715l.048.082 1.771 9.395a5.79 5.79 0 0 1-.705 4.023l-2.424 4.105a5.75 5.75 0 0 0-.738 3.77l1.872 12.492a2.054 2.054 0 0 1-2.73-.406Z"
                      clip-rule="evenodd"
                    />
                  </svg>
                </div>
                <div className="flex space-x-8">
                  <EthUsdSwitch />
                  <DarkModeSwitch />
                </div>
              </div>
              <main>{children}</main>
            </div>
          </div>
          <Loader />
        </Providers>
      </body>
    </html>
  );
}

// export default install(config, RootLayout);
